{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from '../../components/MyLayout';\nimport redirect from 'next-redirect';\nimport Link from 'next/link';\nimport fetch from 'isomorphic-unfetch';\nimport Router from \"next/router\";\n\nconst Post = props => {\n  return __jsx(Layout, null, __jsx(\"p\", null, props.uuid), __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(Link, {\n    href: \"/news/[news]\",\n    as: \"/news/2020-01-11-world-middleeast-iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c9ZZ\"\n  }, __jsx(\"a\", null, \"Bad link\"))), __jsx(\"li\", null, __jsx(Link, {\n    href: \"/news/[news]\",\n    as: \"/news/2020-01-11-world-middleeast-iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c977\"\n  }, __jsx(\"a\", null, \"Good link\"))), __jsx(\"li\", null, __jsx(Link, {\n    href: \"/news/[news]\",\n    as: \"/news/2020-01-11-world-middleeast-iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c988\"\n  }, __jsx(\"a\", null, \"Good link\")))));\n}; // url ===> /news/2020-01-11-world-middleeast-iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c977\n\n\nPost.getInitialProps = async function (context) {\n  const {\n    news\n  } = context.query;\n  const uuid = news.slice(-36);\n  const titleUrl = uuid.slice(0, news.length - 36);\n  const url = '/news/' + news;\n  const path = 'https://data.joornalo.com/' + uuid.charAt(0) + '/' + uuid.charAt(1) + '/' + uuid + '.json';\n  console.log('---------------------------');\n  console.log(uuid); // if (details !== '2020-01-11-world-middleeast-iraq-iran-us-troops-') {\n  //   console.log(`Bad URL`);\n  //   return redirect(context, '/news/2020-01-11-world-middleeast-iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c977');\n  // }\n\n  try {\n    const res = await fetch(path);\n    const data = await res.json(); // console.log(url);\n    // console.log(data['news-url']);\n\n    if (url !== data['news-url']) {\n      console.log(`Bad URL...redirected`); // return redirect(context, data['news-url'], 308);\n    }\n\n    return {\n      uuid,\n      data\n    };\n  } catch (e) {\n    console.log(`Page not found`); // return redirect(context, '/notfound', 302);\n    // return {\n    //   data: { notFound: true }\n    // };\n  }\n\n  console.log(`uuid: ${uuid}`);\n  console.log(`details: ${details}`);\n  return {\n    uuid,\n    details\n  };\n};\n\nexport default Post;","map":null,"metadata":{},"sourceType":"module"}