{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\n\nconst Adv = context => {\n  const {\n    0: msg,\n    1: setMsg\n  } = useState('---');\n  let loaded = false;\n  let isIntersecting = false;\n  const id = 'adv' + Math.round(Math.random() * 100000);\n  useEffect(() => {\n    const div = document.getElementById(id);\n\n    if (div) {\n      const contentWidth = div.offsetWidth; // console.log(id, '::::', contentWidth)\n\n      try {\n        let observer = new IntersectionObserver((entries, observerChild) => {\n          if (!loaded && entries[0].isIntersecting) {\n            loaded = true;\n            isIntersecting = true;\n            observerChild.unobserve(entries[0].target);\n            preLoad();\n          }\n        });\n        observer.observe(div);\n      } catch (err) {\n        safariIssue();\n      }\n    }\n  });\n\n  const safariIssue = () => {\n    if (!loaded) {\n      loaded = true;\n      isIntersecting = true;\n      preLoad();\n    }\n  };\n\n  const preLoad = () => {\n    if (isIntersecting) {\n      console.log('Ready to load...............................');\n      setMsg('Loaded');\n    }\n  };\n\n  return __jsx(\"div\", {\n    className: \"adv\",\n    id: id\n  }, \"Ad: \", msg);\n};\n\nexport default Adv;","map":null,"metadata":{},"sourceType":"module"}