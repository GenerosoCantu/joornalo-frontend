{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar __jsx = React.createElement;\n// import { useRouter } from 'next/router'\nimport React, { useEffect, useContext } from 'react';\nimport Link from 'next/link';\nimport { connect } from 'react-redux';\nimport Layout from '../../../../components/MyLayout';\nimport redirect from 'next-redirect';\nimport Template from \"../../../../components/Template.js\";\nimport Error from 'next/error';\nimport { getNews, getOtherNews, getConfig } from '../../../../store/actions/newsActions'; // url ===> http://localhost:3000/section/world/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c977\n\nvar News = function News(_ref) {\n  var id = _ref.id,\n      uuid = _ref.uuid,\n      news = _ref.news,\n      templateName = _ref.templateName,\n      template = _ref.template,\n      notFound = _ref.notFound;\n\n  var getTitle = function getTitle(news) {\n    return news ? news.title : '';\n  };\n\n  if (notFound) {\n    return __jsx(Error, {\n      statusCode: \"404\"\n    });\n  }\n\n  return __jsx(Layout, null, __jsx(\"div\", {\n    className: templateName\n  }, __jsx(Template, {\n    grid: template,\n    data: news\n  })), __jsx(\"ul\", null, __jsx(\"li\", null, __jsx(Link, {\n    href: \"/section/[section]/[date]/[id]\",\n    as: \"/section/world/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c9ZZ\"\n  }, __jsx(\"a\", null, \"Bad link\"))), __jsx(\"li\", null, __jsx(Link, {\n    href: \"/section/[section]/[date]/[id]\",\n    as: \"/section/world-europe/2020-01-11/harry-meghan-drop-royal-duties-4c50e545-539e-4893-b505-1edc2de3c988\"\n  }, __jsx(\"a\", null, \"Link: Megan & Harry\"))), __jsx(\"li\", null, __jsx(Link, {\n    href: \"/section/[section]/[date]/[id]\",\n    as: \"/section/world-middleeast/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c999\"\n  }, __jsx(\"a\", null, \"Link: Iran Nuclear Deal\")))));\n};\n\nNews.getInitialProps = function _callee(context, eureka) {\n  var store, _context$query, section, date, id, uuid, url, notFound, error;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          store = context.store;\n          _context$query = context.query, section = _context$query.section, date = _context$query.date, id = _context$query.id;\n          uuid = id.slice(-36);\n          url = \"/section/\".concat(section, \"/\").concat(date, \"/\").concat(id);\n          notFound = false;\n          console.log(eureka);\n          _context.prev = 6;\n\n          if (true) {\n            _context.next = 10;\n            break;\n          }\n\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(store.dispatch(getConfig(context.req)));\n\n        case 10:\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(store.dispatch(getNews(section, date, uuid, url, context.req)));\n\n        case 12:\n          _context.next = 14;\n          return _regeneratorRuntime.awrap(store.dispatch(getOtherNews(section)));\n\n        case 14:\n          error = store.getState().news.error;\n\n          if (!(error && error.indexOf('Redirect: ') == 0)) {\n            _context.next = 17;\n            break;\n          }\n\n          return _context.abrupt(\"return\", redirect(context, error.slice(10), 308));\n\n        case 17:\n          if (error == 'NotFound') {\n            notFound = true;\n          }\n\n          _context.next = 23;\n          break;\n\n        case 20:\n          _context.prev = 20;\n          _context.t0 = _context[\"catch\"](6);\n          console.log(_context.t0);\n\n        case 23:\n          return _context.abrupt(\"return\", {\n            id: id,\n            uuid: uuid,\n            url: url,\n            notFound: notFound\n          });\n\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[6, 20]]);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    news: state.news.news,\n    topNews: state.news.topNews,\n    moreNews: state.news.moreNews,\n    templateName: state.news.templateName,\n    template: state.news.template,\n    loading: state.news.loading\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getNews: getNews,\n  getOtherNews: getOtherNews\n})(News);","map":null,"metadata":{},"sourceType":"module"}