{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"C:\\\\Projects\\\\DEVELOPMENT\\\\joornalo-frontend\\\\front.joornalo\\\\pages\\\\section\\\\[section]\\\\[date]\\\\[id].js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Link from 'next/link';\nimport redirect from 'next-redirect';\nimport Error from 'next/error';\nimport { connect } from 'react-redux';\nimport { getNews, getOtherNews, getConfig } from '../../../../store/actions/newsActions';\nimport Template from \"../../../../components/Template.js\";\nimport Layout from '../../../../components/MyLayout'; // url ===> http://localhost:3000/section/world/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c977\n\nvar News = function News(_ref) {\n  var agent = _ref.agent,\n      id = _ref.id,\n      uuid = _ref.uuid,\n      news = _ref.news,\n      templateName = _ref.templateName,\n      template = _ref.template,\n      notFound = _ref.notFound;\n\n  var getTitle = function getTitle(news) {\n    return news ? news.title : '';\n  };\n\n  if (notFound) {\n    return __jsx(Error, {\n      statusCode: \"404\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    });\n  }\n\n  return __jsx(Layout, {\n    agent: agent,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: templateName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, __jsx(Template, {\n    grid: template.news.ayout,\n    data: news,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  })), __jsx(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31\n    },\n    __self: this\n  }, __jsx(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/section/[section]/[date]/[id]\",\n    as: \"/section/world/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c9ZZ\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, \"Bad link\"))), __jsx(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/section/[section]/[date]/[id]\",\n    as: \"/section/world-europe/2020-01-11/harry-meghan-drop-royal-duties-4c50e545-539e-4893-b505-1edc2de3c988\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"Link: Megan & Harry\"))), __jsx(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/section/[section]/[date]/[id]\",\n    as: \"/section/world-middleeast/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c999\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, \"Link: Iran Nuclear Deal\")))));\n};\n\nNews.getInitialProps = function _callee(context, agent) {\n  var store, _context$query, section, date, id, uuid, url, notFound, error;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          store = context.store;\n          _context$query = context.query, section = _context$query.section, date = _context$query.date, id = _context$query.id;\n          uuid = id.slice(-36);\n          url = \"/section/\".concat(section, \"/\").concat(date, \"/\").concat(id);\n          notFound = false;\n          console.log(agent);\n          _context.prev = 6;\n\n          if (true) {\n            _context.next = 10;\n            break;\n          }\n\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(store.dispatch(getConfig(context.req)));\n\n        case 10:\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(store.dispatch(getNews(section, date, uuid, url, context.req)));\n\n        case 12:\n          _context.next = 14;\n          return _regeneratorRuntime.awrap(store.dispatch(getOtherNews(section)));\n\n        case 14:\n          error = store.getState().news.error;\n\n          if (!(error && error.indexOf('Redirect: ') == 0)) {\n            _context.next = 17;\n            break;\n          }\n\n          return _context.abrupt(\"return\", redirect(context, error.slice(10), 308));\n\n        case 17:\n          if (error == 'NotFound') {\n            notFound = true;\n          }\n\n          _context.next = 23;\n          break;\n\n        case 20:\n          _context.prev = 20;\n          _context.t0 = _context[\"catch\"](6);\n          console.log(_context.t0);\n\n        case 23:\n          return _context.abrupt(\"return\", {\n            agent: agent,\n            id: id,\n            uuid: uuid,\n            url: url,\n            notFound: notFound\n          });\n\n        case 24:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[6, 20]]);\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    news: state.news.news,\n    topNews: state.news.topNews,\n    moreNews: state.news.moreNews,\n    // templateName: state.template.news.name,\n    template: state.template,\n    loading: state.news.loading\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getNews: getNews,\n  getOtherNews: getOtherNews\n})(News);","map":{"version":3,"sources":["C:/Projects/DEVELOPMENT/joornalo-frontend/front.joornalo/pages/section/[section]/[date]/[id].js"],"names":["React","Link","redirect","Error","connect","getNews","getOtherNews","getConfig","Template","Layout","News","agent","id","uuid","news","templateName","template","notFound","getTitle","title","ayout","getInitialProps","context","store","query","section","date","slice","url","console","log","dispatch","req","error","getState","indexOf","mapStateToProps","state","topNews","moreNews","loading"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Link from 'next/link';\r\nimport redirect from 'next-redirect';\r\nimport Error from 'next/error'\r\nimport { connect } from 'react-redux';\r\nimport { getNews, getOtherNews, getConfig } from '../../../../store/actions/newsActions';\r\nimport Template from \"../../../../components/Template.js\";\r\nimport Layout from '../../../../components/MyLayout';\r\n\r\n// url ===> http://localhost:3000/section/world/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c977\r\n\r\n\r\nconst News = ({ agent, id, uuid, news, templateName, template, notFound }) => {\r\n\r\n  const getTitle = (news) => {\r\n    return (news) ? news.title : '';\r\n  }\r\n\r\n  if (notFound) {\r\n    return <Error statusCode='404' />\r\n  }\r\n\r\n  return (\r\n    <Layout agent={agent}>\r\n\r\n      <div className={templateName}>\r\n        <Template grid={template.news.ayout} data={news} />\r\n      </div>\r\n\r\n\r\n      <ul>\r\n        <li>\r\n          <Link href=\"/section/[section]/[date]/[id]\" as=\"/section/world/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c9ZZ\">\r\n            <a>Bad link</a>\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link href=\"/section/[section]/[date]/[id]\" as=\"/section/world-europe/2020-01-11/harry-meghan-drop-royal-duties-4c50e545-539e-4893-b505-1edc2de3c988\">\r\n            <a>Link: Megan & Harry</a>\r\n          </Link>\r\n        </li>\r\n        <li>\r\n          <Link href=\"/section/[section]/[date]/[id]\" as=\"/section/world-middleeast/2020-01-11/iraq-iran-us-troops-4c50e545-539e-4893-b505-1edc2de3c999\">\r\n            <a>Link: Iran Nuclear Deal</a>\r\n          </Link>\r\n        </li>\r\n      </ul>\r\n\r\n    </Layout>\r\n  )\r\n}\r\n\r\nNews.getInitialProps = async function (context, agent) {\r\n  const { store } = context;\r\n  const { section, date, id } = context.query;\r\n  const uuid = id.slice(-36);\r\n  const url = `/section/${section}/${date}/${id}`;\r\n  let notFound = false;\r\n\r\n  console.log(agent);\r\n\r\n  try {\r\n    if (!process.browser) {\r\n      await store.dispatch(getConfig(context.req));\r\n    }\r\n    await store.dispatch(getNews(section, date, uuid, url, context.req));\r\n    await store.dispatch(getOtherNews(section));\r\n\r\n    const error = store.getState().news.error;\r\n\r\n    if (error && error.indexOf('Redirect: ') == 0) {\r\n      return redirect(context, error.slice(10), 308);\r\n    }\r\n    if (error == 'NotFound') {\r\n      notFound = true;\r\n    }\r\n\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n\r\n  return {\r\n    agent,\r\n    id,\r\n    uuid,\r\n    url,\r\n    notFound\r\n  };\r\n\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  news: state.news.news,\r\n  topNews: state.news.topNews,\r\n  moreNews: state.news.moreNews,\r\n  // templateName: state.template.news.name,\r\n  template: state.template,\r\n  loading: state.news.loading\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { getNews, getOtherNews }\r\n)(News);"]},"metadata":{},"sourceType":"module"}